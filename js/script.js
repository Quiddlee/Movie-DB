//part 1


/* –ó–∞–¥–∞–Ω–∏—è –Ω–∞ —É—Ä–æ–∫:

1) –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ä–µ–∫–ª–∞–º–Ω—ã–µ –±–ª–æ–∫–∏ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø—Ä–∞–≤–∞—è —á–∞—Å—Ç—å —Å–∞–π—Ç–∞)

2) –ò–∑–º–µ–Ω–∏—Ç—å –∂–∞–Ω—Ä —Ñ–∏–ª—å–º–∞, –ø–æ–º–µ–Ω—è—Ç—å "–∫–æ–º–µ–¥–∏—è" –Ω–∞ "–¥—Ä–∞–º–∞"

3) –ò–∑–º–µ–Ω–∏—Ç—å –∑–∞–¥–Ω–∏–π —Ñ–æ–Ω –ø–æ—Å—Ç–µ—Ä–∞ —Å —Ñ–∏–ª—å–º–æ–º –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ "bg.jpg". –û–Ω–æ –ª–µ–∂–∏—Ç –≤ –ø–∞–ø–∫–µ img.
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ JS

4) –°–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —ç—Ç–æ–≥–æ JS —Ñ–∞–π–ª–∞.
–û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É 

5) –î–æ–±–∞–≤–∏—Ç—å –Ω—É–º–µ—Ä–∞—Ü–∏—é –≤—ã–≤–µ–¥–µ–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤ */


//part 2


/* –ó–∞–¥–∞–Ω–∏—è –Ω–∞ —É—Ä–æ–∫:

1) –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, —á—Ç–æ –ø–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã –∏ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å" - 
–Ω–æ–≤—ã–π —Ñ–∏–ª—å–º –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å–ø–∏—Å–æ–∫. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è.
–ù–æ–≤—ã–π —Ñ–∏–ª—å–º –¥–æ–ª–∂–µ–Ω –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –≤ movieDB.movies.
–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–Ω–∞—á–µ–Ω–∏—é input - –æ–±—Ä–∞—â–∞–µ–º—Å—è –∫ –Ω–µ–º—É –∫–∞–∫ input.value;
P.S. –ó–¥–µ—Å—å –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –ª—é–±–æ–π, –Ω–æ —Ä–∞–±–æ—á–∏–π.

2) –ï—Å–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –±–æ–ª—å—à–µ, —á–µ–º 21 —Å–∏–º–≤–æ–ª - –æ–±—Ä–µ–∑–∞—Ç—å –µ–≥–æ –∏ –¥–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∏ —Ç–æ—á–∫–∏

3) –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –º—É—Å–æ—Ä–Ω—É—é –∫–æ—Ä–∑–∏–Ω—É - —ç–ª–µ–º–µ–Ω—Ç –±—É–¥–µ—Ç —É–¥–∞–ª—è—Ç—å—Å—è –∏–∑ —Å–ø–∏—Å–∫–∞ (—Å–ª–æ–∂–Ω–æ)

4) –ï—Å–ª–∏ –≤ —Ñ–æ—Ä–º–µ —Å—Ç–æ–∏—Ç –≥–∞–ª–æ—á–∫–∞ "–°–¥–µ–ª–∞—Ç—å –ª—é–±–∏–º—ã–º" - –≤ –∫–æ–Ω—Å–æ–ª—å –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ: 
"–î–æ–±–∞–≤–ª—è–µ–º –ª—é–±–∏–º—ã–π —Ñ–∏–ª—å–º"

5) –§–∏–ª—å–º—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É */

'use strict';

document.addEventListener('DOMContentLoaded', () => {
    

    //part 1


    const movieDB = {
        movies: [
            "–õ–æ–≥–∞–Ω",
            "–õ–∏–≥–∞ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏",
            "–õ–∞-–ª–∞ –ª—ç–Ω–¥",
            "–û–¥–µ—Ä–∂–∏–º–æ—Å—Ç—å",
            "–°–∫–æ—Ç—Ç –ü–∏–ª–∏–≥—Ä–∏–º –ø—Ä–æ—Ç–∏–≤...",
        ]
    };

    const adv = document.querySelectorAll('.promo__adv img');
    const bg = document.querySelector('.promo__bg');
    const genre = document.querySelector('.promo__genre');
    const movieList = document.querySelector('.promo__interactive-list');
    const addForm = document.querySelector('form.add');
    const addFilmInput = document.querySelector('.adding__input');
    const checkbox = document.querySelector('[type="checkbox"]');

    const deleteAdv = (arr) => {
        arr.forEach(item => {
            item.remove(); 
        });
    };

    const makeChanges = () => {
        genre.textContent = '–î—Ä–∞–º–∞';
    
        bg.style.backgroundImage = 'url("img/bg.jpg")';
    };

    const sortArr = (arr) => {
        arr.sort();
    };
    
    function createMovieList (films, parent) {
        parent.innerHTML = '';
        sortArr(films);    


        films.forEach((e, i) => {
            parent.innerHTML += `
                <li class="promo__interactive-item">${i + 1} ${e}
                    <div class="delete"></div>
                </li>
            `;
        });

        document.querySelectorAll('.delete').forEach((btn, i) => {    //–≤ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –º—ã —Å–æ–∑–¥–∞–ª–∏ –ù–û–í–´–ô —Å–ø–∏—Å–æ–∫, —Ç–æ–µ—Å—Ç—å —Å—Ç–∞—Ä—ã–π —Å–ø–∏—Å–æ–∫ —É–¥–∞–ª–∏–ª—Å—è, –ø–æ—ç—Ç–æ–º—É –∫–æ–≥–¥–∞ –º—ã –ø–æ–º–µ—â–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ, —Å–ø–∏—Å–æ–∫ —Å —ç—Ç–∏–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ —É—Å—Ç–∞—Ä–µ–≤–∞–µ—Ç
            btn.addEventListener('click', () => {
                btn.parentElement.remove();
                movieDB.movies.splice(i, 1);
                
                createMovieList(films, parent);
            });
        });
    }

    // movieList.forEach((e, i) => {
    //     e.textContent = movieDB.movies.sort()[i];
    //     e.prepend(i + 1 + ' ');
    // });


    //part 2

    function isChecked () {
        if (checkbox.checked) {console.log('–î–æ–±–∞–≤–ª—è–µ–º –ª—é–±–∏–º—ã–π —Ñ–∏–ª—å–º');}
    }

    addForm.addEventListener('submit', (event) => {
        event.preventDefault();

        let newFilm = addFilmInput.value;
        
        if (newFilm) {
            if (newFilm.length > 21) {
                newFilm = `${newFilm.substring(0, 22)}...`;                         // ${} - –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è üôÇ
            } 
            
            movieDB.movies.push(newFilm);
            sortArr(movieDB.movies);
            
            createMovieList(movieDB.movies, movieList);
        }
        
        isChecked();
        
        event.target.reset();
    });

    deleteAdv(adv);
    makeChanges();
    createMovieList(movieDB.movies, movieList);
});